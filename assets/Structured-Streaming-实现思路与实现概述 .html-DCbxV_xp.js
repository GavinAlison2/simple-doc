import{_ as e}from"./20250420008-CWfxgdf_.js";import{_ as a}from"./20250420009-DhL5IorG.js";import{_ as n}from"./20250420010-DhL5IorG.js";import{_ as s,c as r,e as l,o as i}from"./app-DlGl6QFf.js";const c="/simple-doc/assets/20250420001-Drhe0oQn.png",o="/simple-doc/assets/20250420002-GyAQjEUC.png",p="/simple-doc/assets/20250420003-3_eKM9LK.png",d="/simple-doc/assets/20250420004-D788kf7h.png",u="/simple-doc/assets/20250420005-qRdzVMYC.png",m="/simple-doc/assets/20250420006-D6oA7eiT.png",g="/simple-doc/assets/20250420007-DscRmcB1.png",h={};function k(S,t){return i(),r("div",null,t[0]||(t[0]=[l(`<h1 id="structured-streaming-å®ç°æ€è·¯ä¸å®ç°æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#structured-streaming-å®ç°æ€è·¯ä¸å®ç°æ¦‚è¿°"><span>Structured Streaming å®ç°æ€è·¯ä¸å®ç°æ¦‚è¿°</span></a></h1><p><em><strong>[Spark] Structured Streaming æºç è§£æç³»åˆ—</strong></em> ï¼Œè¿”å›ç›®å½•è¯· <a href=".">çŒ›æˆ³è¿™é‡Œ</a></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">æœ¬æ–‡å†…å®¹é€‚ç”¨èŒƒå›´ï¼š</span>
<span class="line">* 2018.11.02 update, Spark 2.4 å…¨ç³»åˆ— âˆš (å·²å‘å¸ƒï¼š2.4.0)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ¬æ–‡ç›®å½•</p><div><a href="#ä¸€å¼•è¨€spark-2-æ—¶ä»£">ä¸€ã€å¼•è¨€ï¼šSpark 2 æ—¶ä»£!</a><br><a href="#äºŒä»-structured-data-åˆ°-structured-streaming">äºŒã€ä» Structured Data åˆ° Structured Streaming</a><br><a href="#ä¸‰structured-streamingæ— é™å¢é•¿çš„è¡¨æ ¼">ä¸‰ã€Structured Streamingï¼šæ— é™å¢é•¿çš„è¡¨æ ¼</a><br><a href="#å››streamexecutionæŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“">å››ã€StreamExecutionï¼šæŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“</a><br> ã€€ã€€<a href="#1-streamexecution-çš„åˆå§‹çŠ¶æ€">1. StreamExecution çš„åˆå§‹çŠ¶æ€</a><br> ã€€ã€€<a href="#2-streamexecution-çš„æŒç»­æŸ¥è¯¢">2. StreamExecution çš„æŒç»­æŸ¥è¯¢</a><br> ã€€ã€€<a href="#3-streamexecution-çš„æŒç»­æŸ¥è¯¢å¢é‡">3. StreamExecution çš„æŒç»­æŸ¥è¯¢ï¼ˆå¢é‡ï¼‰</a><br> ã€€ã€€<a href="#4-æ•…éšœæ¢å¤">4. æ•…éšœæ¢å¤</a><br> ã€€ã€€<a href="#5-sources-ä¸-sinks">5. Sources ä¸ Sinks</a><br> ã€€ã€€<a href="#6-å°ç»“end-to-end-exactly-once-guarantees">6. å°ç»“ï¼šend-to-end exactly-once guarantees</a><br><a href="#äº”å…¨æ–‡æ€»ç»“">äº”ã€å…¨æ–‡æ€»ç»“</a><br><a href="#å…­æ‰©å±•é˜…è¯»">å…­ã€æ‰©å±•é˜…è¯»</a><br><a href="#å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</a></div><h2 id="ä¸€ã€å¼•è¨€-spark-2-æ—¶ä»£" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å¼•è¨€-spark-2-æ—¶ä»£"><span>ä¸€ã€å¼•è¨€ï¼šSpark 2 æ—¶ä»£!</span></a></h2><p align="center"><img src="`+c+'" alt="Spark 1.x stack"></p><p>Spark 1.x æ—¶ä»£é‡Œï¼Œä»¥ SparkContextï¼ˆåŠ RDD APIï¼‰ä¸ºåŸºç¡€ï¼Œåœ¨ structured data åœºæ™¯è¡ç”Ÿå‡ºäº† SQLContext, HiveContextï¼Œåœ¨ streaming åœºæ™¯è¡ç”Ÿå‡ºäº† StreamingContextï¼Œå¾ˆæ˜¯ç³ç…æ»¡ç›®ã€‚</p><p align="center"><img src="'+o+'" alt="Spark 2.x stack"></p><p>Spark 2.x åˆ™å’”å’”å’”ç²¾ç®€åˆ°åªä¿ç•™ä¸€ä¸ª SparkSession ä½œä¸ºä¸»ç¨‹åºå…¥å£ï¼Œä»¥ Dataset/DataFrame ä¸ºä¸»è¦çš„ç”¨æˆ· APIï¼ŒåŒæ—¶æ»¡è¶³ structured data, streaming data, machine learning, graph ç­‰åº”ç”¨åœºæ™¯ï¼Œå¤§å¤§å‡å°‘ä½¿ç”¨è€…éœ€è¦å­¦ä¹ çš„å†…å®¹ï¼Œçˆ½çˆ½åœ°åˆé‡æ–°å®ç°äº†ä¸€æŠŠå½“å¹´çš„ &quot;one stack to rule them all&quot; çš„ç†æƒ³ã€‚</p><p align="center"><img src="'+p+'" alt="RDD vs Dataset/DataFrame"></p><p>æˆ‘ä»¬è¿™é‡Œç®€å•å›é¡¾ä¸‹ Spark 2.x çš„ Dataset/DataFrame ä¸ Spark 1.x çš„ RDD çš„ä¸åŒï¼š</p><ul><li>Spark 1.x çš„ RDD æ›´å¤šæ„ä¹‰ä¸Šæ˜¯ä¸€ä¸ªä¸€ç»´ã€åªæœ‰è¡Œæ¦‚å¿µçš„æ•°æ®é›†ï¼Œæ¯”å¦‚ <code>RDD[Person]</code>ï¼Œé‚£ä¹ˆä¸€è¡Œå°±æ˜¯ä¸€ä¸ª <code>Person</code>ï¼Œå­˜åœ¨å†…å­˜é‡Œä¹Ÿæ˜¯æŠŠ <code>Person</code> ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼ˆåºåˆ—åŒ–å‰çš„ java objectï¼Œæˆ–åºåˆ—åŒ–åçš„ bytesï¼‰ã€‚</li><li>Spark 2.x é‡Œï¼Œä¸€ä¸ª <code>Person</code> çš„ Dataset æˆ– DataFrameï¼Œæ˜¯äºŒç»´è¡Œ+åˆ—çš„æ•°æ®é›†ï¼Œæ¯”å¦‚ä¸€è¡Œä¸€ä¸ª <code>Person</code>ï¼Œæœ‰ <code>name:String</code>, <code>age:Int</code>, <code>height:Double</code> ä¸‰åˆ—ï¼›åœ¨å†…å­˜é‡Œçš„ç‰©ç†ç»“æ„ï¼Œä¹Ÿä¼šæ˜¾å¼åŒºåˆ†åˆ—è¾¹ç•Œã€‚ <ul><li>Dataset/DataFrame åœ¨ API ä½¿ç”¨ä¸Šæœ‰åŒºåˆ«ï¼šDataset ç›¸æ¯” DataFrame è€Œè¨€æ˜¯ type-safe çš„ï¼Œèƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶å¯¹ AnalysisExecption æŠ¥é”™ï¼ˆå¦‚ä¸‹å›¾ç¤ºä¾‹ï¼‰: <img src="'+d+'"></li><li>Dataset/DataFrame å­˜å‚¨æ–¹å¼æ— åŒºåˆ«ï¼šä¸¤è€…åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ˜¯å®Œå…¨ä¸€æ ·çš„ã€æ˜¯æŒ‰ç…§äºŒç»´è¡Œåˆ—ï¼ˆUnsafeRowï¼‰æ¥å­˜çš„ï¼Œæ‰€ä»¥åœ¨æ²¡å¿…è¦åŒºåˆ† <code>Dataset</code> æˆ– <code>DataFrame</code> åœ¨ API å±‚é¢çš„å·®åˆ«æ—¶ï¼Œæˆ‘ä»¬ç»Ÿä¸€å†™ä½œ <code>Dataset/DataFrame</code></li></ul></li></ul><blockquote><p>[å°èŠ‚æ³¨] å…¶å® Spark 1.x å°±æœ‰äº† Dataset/DataFrame çš„æ¦‚å¿µï¼Œä½†è¿˜ä»…æ˜¯ SparkSQL æ¨¡å—çš„ä¸»è¦ API ï¼›åˆ°äº† 2.0 æ—¶åˆ™ Dataset/DataFrame ä¸å±€é™åœ¨ SparkSQLã€è€Œæˆä¸º Spark å…¨å±€çš„ä¸»è¦ APIã€‚</p></blockquote><h2 id="äºŒã€ä»-structured-data-åˆ°-structured-streaming" tabindex="-1"><a class="header-anchor" href="#äºŒã€ä»-structured-data-åˆ°-structured-streaming"><span>äºŒã€ä» Structured Data åˆ° Structured Streaming</span></a></h2><p>ä½¿ç”¨ Dataset/DataFrame çš„è¡Œåˆ—æ•°æ®è¡¨æ ¼æ¥è¡¨è¾¾ structured dataï¼Œæ—¢å®¹æ˜“ç†è§£ï¼Œåˆå…·æœ‰å¹¿æ³›çš„é€‚ç”¨æ€§ï¼š</p><ul><li>Java ç±» <code>class Person { String name; int age; double height}</code> çš„å¤šä¸ªå¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è½¬åŒ–ä¸º <code>Dataset/DataFrame</code></li><li>å¤šæ¡ json å¯¹è±¡æ¯”å¦‚ <code>{name: &quot;Alice&quot;, age: 20, height: 1.68}, {name: &quot;Bob&quot;, age: 25, height: 1.76}</code> å¯ä»¥æ–¹ä¾¿åœ°è½¬åŒ–ä¸º <code>Dataset/DataFrame</code></li><li>æˆ–è€… MySQL è¡¨ã€è¡Œå¼å­˜å‚¨æ–‡ä»¶ã€åˆ—å¼å­˜å‚¨æ–‡ä»¶ç­‰ç­‰ç­‰éƒ½å¯ä»¥æ–¹ä¾¿åœ°è½¬åŒ–ä¸º <code>Dataset/DataFrame</code></li></ul><p>Spark 2.0 æ›´è¿›ä¸€æ­¥ï¼Œä½¿ç”¨ Dataset/Dataframe çš„è¡Œåˆ—æ•°æ®è¡¨æ ¼æ¥æ‰©å±•è¡¨è¾¾ streaming data â€”â€” æ‰€ä»¥ä¾¿æ¨ªç©ºå‡ºä¸–äº† Structured Streaming ã€ã€ŠStructured Streaming æºç è§£æç³»åˆ—ã€‹â€”â€” ä¸é™æ€çš„ structured data ä¸åŒï¼ŒåŠ¨æ€çš„ streaming data çš„è¡Œåˆ—æ•°æ®è¡¨æ ¼æ˜¯ä¸€ç›´æ— é™å¢é•¿çš„ï¼ˆå› ä¸º streaming data åœ¨æºæºä¸æ–­åœ°äº§ç”Ÿï¼‰ï¼</p><p align="center"><img src="'+u+'" alt="single API: Dataset/DataFrame"></p><h2 id="ä¸‰ã€structured-streaming-æ— é™å¢é•¿çš„è¡¨æ ¼" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€structured-streaming-æ— é™å¢é•¿çš„è¡¨æ ¼"><span>ä¸‰ã€Structured Streamingï¼šæ— é™å¢é•¿çš„è¡¨æ ¼</span></a></h2><p>åŸºäºâ€œæ— é™å¢é•¿çš„è¡¨æ ¼â€çš„ç¼–ç¨‹æ¨¡å‹ [1]ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸ª streaming çš„ word countï¼š</p><p align="center"><img src="'+m+`" alt="word count"></p><p>å¯¹åº”çš„ Structured Streaming ä»£ç ç‰‡æ®µï¼š</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala"><pre><code><span class="line"><span class="token keyword">val</span> spark <span class="token operator">=</span> SparkSession<span class="token punctuation">.</span>builder<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>master<span class="token punctuation">(</span><span class="token string">&quot;...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getOrCreate<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// åˆ›å»ºä¸€ä¸ª SparkSession ç¨‹åºå…¥å£</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> lines <span class="token operator">=</span> spark<span class="token punctuation">.</span>readStream<span class="token punctuation">.</span>textFile<span class="token punctuation">(</span><span class="token string">&quot;some_dir&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// å°† some_dir é‡Œçš„å†…å®¹åˆ›å»ºä¸º Dataset/DataFrameï¼›å³ input table</span></span>
<span class="line"><span class="token keyword">val</span> words <span class="token operator">=</span> lines<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> wordCounts <span class="token operator">=</span> words<span class="token punctuation">.</span>groupBy<span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// å¯¹ &quot;value&quot; åˆ—åš countï¼Œå¾—åˆ°å¤šè¡ŒäºŒåˆ—çš„ Dataset/DataFrameï¼›å³ result table</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> query <span class="token operator">=</span> wordCounts<span class="token punctuation">.</span>writeStream                 <span class="token comment">// æ‰“ç®—å†™å‡º wordCounts è¿™ä¸ª Dataset/DataFrame</span></span>
<span class="line">  <span class="token punctuation">.</span>outputMode<span class="token punctuation">(</span><span class="token string">&quot;complete&quot;</span><span class="token punctuation">)</span>                          <span class="token comment">// æ‰“ç®—å†™å‡º wordCounts çš„å…¨é‡æ•°æ®</span></span>
<span class="line">  <span class="token punctuation">.</span>format<span class="token punctuation">(</span><span class="token string">&quot;console&quot;</span><span class="token punctuation">)</span>                               <span class="token comment">// æ‰“ç®—å†™å‡ºåˆ°æ§åˆ¶å°</span></span>
<span class="line">  <span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>                                         <span class="token comment">// æ–°èµ·ä¸€ä¸ªçº¿ç¨‹å¼€å§‹çœŸæ­£ä¸åœå†™å‡º</span></span>
<span class="line"></span>
<span class="line">query<span class="token punctuation">.</span>awaitTermination<span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment">// å½“å‰ç”¨æˆ·ä¸»çº¿ç¨‹æŒ‚ä½ï¼Œç­‰å¾…æ–°èµ·æ¥çš„å†™å‡ºçº¿ç¨‹ç»“æŸ</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œéœ€è¦è¯´æ˜å‡ ç‚¹ï¼š</p><ul><li>Structured Streaming ä¹Ÿæ˜¯å…ˆçº¯å®šä¹‰ã€å†è§¦å‘æ‰§è¡Œçš„æ¨¡å¼ï¼Œå³ <ul><li>å‰é¢å¤§éƒ¨åˆ†ä»£ç æ˜¯ <em><strong>çº¯å®šä¹‰</strong></em> Dataset/DataFrame çš„äº§ç”Ÿã€å˜æ¢å’Œå†™å‡º</li><li>åé¢ä½ç½®å†çœŸæ­£ <em><strong>start</strong></em> ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå»è§¦å‘æ‰§è¡Œä¹‹å‰çš„å®šä¹‰</li></ul></li><li>åœ¨æ–°çš„æ‰§è¡Œçº¿ç¨‹é‡Œæˆ‘ä»¬éœ€è¦ <em><strong>æŒç»­åœ°</strong></em> å»å‘ç°æ–°æ•°æ®ï¼Œè¿›è€Œ <em><strong>æŒç»­åœ°</strong></em> æŸ¥è¯¢æœ€æ–°è®¡ç®—ç»“æœè‡³å†™å‡º <ul><li>è¿™ä¸ªè¿‡ç¨‹å«åš <em><strong>continous queryï¼ˆæŒç»­æŸ¥è¯¢ï¼‰</strong></em></li></ul></li></ul><h2 id="å››ã€streamexecution-æŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“" tabindex="-1"><a class="header-anchor" href="#å››ã€streamexecution-æŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“"><span>å››ã€StreamExecutionï¼šæŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“</span></a></h2><p>ç°åœ¨æˆ‘ä»¬å°†ç›®å…‰èšç„¦åˆ° <em><strong>continuous query</strong></em> çš„é©±åŠ¨å¼•æ“ï¼ˆå³æ•´ä¸ª Structured Streaming çš„é©±åŠ¨å¼•æ“ï¼‰ StreamExecution ä¸Šæ¥ã€‚</p><h3 id="_1-streamexecution-çš„åˆå§‹çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_1-streamexecution-çš„åˆå§‹çŠ¶æ€"><span>1. StreamExecution çš„åˆå§‹çŠ¶æ€</span></a></h3><p>æˆ‘ä»¬å‰æ–‡åˆšè§£æè¿‡ï¼Œå…ˆå®šä¹‰å¥½ Dataset/DataFrame çš„äº§ç”Ÿã€å˜æ¢å’Œå†™å‡ºï¼Œå†å¯åŠ¨ StreamExection å»æŒç»­æŸ¥è¯¢ã€‚è¿™äº› Dataset/DataFrame çš„äº§ç”Ÿã€å˜æ¢å’Œå†™å‡ºçš„ä¿¡æ¯å°±å¯¹åº”ä¿å­˜åœ¨ StreamExecution éå¸¸é‡è¦çš„ 3 ä¸ªæˆå‘˜å˜é‡ä¸­ï¼š</p><ul><li><code>sources</code>: streaming data çš„äº§ç”Ÿç«¯ï¼ˆæ¯”å¦‚ kafka ç­‰ï¼‰</li><li><code>logicalPlan</code>: DataFrame/Dataset çš„ä¸€ç³»åˆ—å˜æ¢ï¼ˆå³è®¡ç®—é€»è¾‘ï¼‰</li><li><code>sink</code>: æœ€ç»ˆç»“æœå†™å‡ºçš„æ¥æ”¶ç«¯ï¼ˆæ¯”å¦‚ file system ç­‰ï¼‰</li></ul><p>StreamExection å¦å¤–çš„é‡è¦æˆå‘˜å˜é‡æ˜¯ï¼š</p><ul><li><code>currentBatchId</code>: å½“å‰æ‰§è¡Œçš„ id</li><li><code>batchCommitLog</code>: å·²ç»æˆåŠŸå¤„ç†è¿‡çš„æ‰¹æ¬¡æœ‰å“ªäº›</li><li><code>offsetLog</code>, <code>availableOffsets</code>, <code>committedOffsets</code>: å½“å‰æ‰§è¡Œéœ€è¦å¤„ç†çš„ source data çš„ meta ä¿¡æ¯</li><li><code>offsetSeqMetadata</code>: å½“å‰æ‰§è¡Œçš„ watermark ä¿¡æ¯ï¼ˆevent time ç›¸å…³ï¼Œæœ¬æ–‡æš‚ä¸æ¶‰åŠã€å¦æ–‡è§£æï¼‰ç­‰</li></ul><p>æˆ‘ä»¬å°† Source, Sink, StreamExecution åŠå…¶é‡è¦æˆå‘˜å˜é‡æ ‡è¯†åœ¨ä¸‹å›¾ï¼Œæ¥ä¸‹æ¥å°†é€ä¸ªè¯¦ç»†è§£æã€‚</p><p><img src="`+g+'" alt="Spark 1.0"></p><h3 id="_2-streamexecution-çš„æŒç»­æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_2-streamexecution-çš„æŒç»­æŸ¥è¯¢"><span>2. StreamExecution çš„æŒç»­æŸ¥è¯¢</span></a></h3><p><img src="'+e+'" alt="Spark 1.0"></p><p>ä¸€æ¬¡æ‰§è¡Œçš„è¿‡ç¨‹å¦‚ä¸Šå›¾ï¼›è¿™é‡Œæœ‰ 6 ä¸ªå…³é”®æ­¥éª¤ï¼š</p><ol><li>StreamExecution é€šè¿‡ Source.getOffset() è·å–æœ€æ–°çš„ offsetsï¼Œå³æœ€æ–°çš„æ•°æ®è¿›åº¦ï¼›</li><li>StreamExecution å°† offsets ç­‰å†™å…¥åˆ° offsetLog é‡Œ <ul><li>è¿™é‡Œçš„ offsetLog æ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„ WAL (Write-Ahead-Log)ï¼Œæ˜¯å°†æ¥å¯ç”¨ä½œæ•…éšœæ¢å¤ç”¨</li></ul></li><li>StreamExecution æ„é€ æœ¬æ¬¡æ‰§è¡Œçš„ LogicalPlan <ul><li>(3a) å°†é¢„å…ˆå®šä¹‰å¥½çš„é€»è¾‘ï¼ˆå³ StreamExecution é‡Œçš„ logicalPlan æˆå‘˜å˜é‡ï¼‰åˆ¶ä½œä¸€ä¸ªå‰¯æœ¬å‡ºæ¥</li><li>(3b) ç»™å®šåˆšåˆšå–åˆ°çš„ offsetsï¼Œé€šè¿‡ Source.getBatch(offsets) è·å–æœ¬æ‰§è¡Œæ–°æ”¶åˆ°çš„æ•°æ®çš„ Dataset/DataFrame è¡¨ç¤ºï¼Œå¹¶æ›¿æ¢åˆ° (3a) ä¸­çš„å‰¯æœ¬é‡Œ</li><li>ç»è¿‡ (3a), (3b) ä¸¤æ­¥ï¼Œæ„é€ å®Œæˆçš„ LogicalPlan å°±æ˜¯é’ˆå¯¹æœ¬æ‰§è¡Œæ–°æ”¶åˆ°çš„æ•°æ®çš„ Dataset/DataFrame å˜æ¢ï¼ˆå³æ•´ä¸ªå¤„ç†é€»è¾‘ï¼‰äº†</li></ul></li><li>è§¦å‘å¯¹æœ¬æ¬¡æ‰§è¡Œçš„ LogicalPlan çš„ä¼˜åŒ–ï¼Œå¾—åˆ° IncrementalExecution <ul><li>é€»è¾‘è®¡åˆ’çš„ä¼˜åŒ–ï¼šé€šè¿‡ Catalyst ä¼˜åŒ–å™¨å®Œæˆ</li><li>ç‰©ç†è®¡åˆ’çš„ç”Ÿæˆä¸é€‰æ‹©ï¼šç»“æœæ˜¯å¯ä»¥ç›´æ¥ç”¨äºæ‰§è¡Œçš„ RDD DAG</li><li>é€»è¾‘è®¡åˆ’ã€ä¼˜åŒ–çš„é€»è¾‘è®¡åˆ’ã€ç‰©ç†è®¡åˆ’ã€åŠæœ€åç»“æœ RDD DAGï¼Œåˆå¹¶èµ·æ¥å°±æ˜¯ IncrementalExecution</li></ul></li><li>å°†è¡¨ç¤ºè®¡ç®—ç»“æœçš„ Dataset/DataFrame (åŒ…å« IncrementalExecution) äº¤ç»™ Sinkï¼Œå³è°ƒç”¨ Sink.add(ds/df)</li><li>è®¡ç®—å®Œæˆåçš„ commit <ul><li>(6a) é€šè¿‡ Source.commit() å‘ŠçŸ¥ Source æ•°æ®å·²ç»å®Œæ•´å¤„ç†ç»“æŸï¼›Source å¯æŒ‰éœ€å®Œæˆæ•°æ®çš„ garbage-collection</li><li>(6b) å°†æœ¬æ¬¡æ‰§è¡Œçš„æ‰¹æ¬¡ id å†™å…¥åˆ° batchCommitLog é‡Œ</li></ul></li></ol><h3 id="_3-streamexecution-çš„æŒç»­æŸ¥è¯¢-å¢é‡" tabindex="-1"><a class="header-anchor" href="#_3-streamexecution-çš„æŒç»­æŸ¥è¯¢-å¢é‡"><span>3. StreamExecution çš„æŒç»­æŸ¥è¯¢ï¼ˆå¢é‡ï¼‰</span></a></h3><p><img src="'+a+'" alt="Spark 1.0"></p><p>Structured Streaming åœ¨ç¼–ç¨‹æ¨¡å‹ä¸Šæš´éœ²ç»™ç”¨æˆ·çš„æ˜¯ï¼Œæ¯æ¬¡æŒç»­æŸ¥è¯¢çœ‹åšé¢å¯¹å…¨é‡æ•°æ®ï¼ˆè€Œä¸ä»…ä»…æ˜¯æœ¬æ¬¡æ‰§è¡Œä¿¡æ”¶åˆ°çš„æ•°æ®ï¼‰ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰§è¡Œçš„ç»“æœæ˜¯é’ˆå¯¹å…¨é‡æ•°æ®è¿›è¡Œè®¡ç®—çš„ç»“æœã€‚</p><p>ä½†æ˜¯åœ¨å®é™…æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºå…¨é‡æ•°æ®ä¼šè¶Šæ”’è¶Šå¤šï¼Œé‚£ä¹ˆæ¯æ¬¡å¯¹å…¨é‡æ•°æ®è¿›è¡Œè®¡ç®—çš„ä»£ä»·å’Œæ¶ˆè€—ä¼šè¶Šæ¥è¶Šå¤§ã€‚</p><p>Structured Streaming çš„åšæ³•æ˜¯ï¼š</p><ul><li>å¼•å…¥å…¨å±€èŒƒå›´ã€é«˜å¯ç”¨çš„ StateStore</li><li>è½¬å…¨é‡ä¸ºå¢é‡ï¼Œå³åœ¨æ¯æ¬¡æ‰§è¡Œæ—¶ï¼š <ul><li>å…ˆä» StateStore é‡Œ restore å‡ºä¸Šæ¬¡æ‰§è¡Œåçš„çŠ¶æ€</li><li>ç„¶ååŠ å…¥æœ¬æ‰§è¡Œçš„æ–°æ•°æ®ï¼Œå†è¿›è¡Œè®¡ç®—</li><li>å¦‚æœæœ‰çŠ¶æ€æ”¹å˜ï¼Œå°†æŠŠæ”¹å˜çš„çŠ¶æ€é‡æ–° save åˆ° StateStore é‡Œ</li></ul></li><li>ä¸ºäº†åœ¨ Dataset/DataFrame æ¡†æ¶é‡Œå®Œæˆå¯¹ StateStore çš„ restore å’Œ save æ“ä½œï¼Œå¼•å…¥ä¸¤ä¸ªæ–°çš„ç‰©ç†è®¡åˆ’èŠ‚ç‚¹ â€”â€” StateStoreRestoreExec å’Œ StateStoreSaveExec</li></ul><p>æ‰€ä»¥ Structured Streaming åœ¨ç¼–ç¨‹æ¨¡å‹ä¸Šæš´éœ²ç»™ç”¨æˆ·çš„æ˜¯ï¼Œæ¯æ¬¡æŒç»­æŸ¥è¯¢çœ‹åšé¢å¯¹å…¨é‡æ•°æ®ï¼Œä½†åœ¨å…·ä½“å®ç°ä¸Šè½¬æ¢ä¸ºå¢é‡çš„æŒç»­æŸ¥è¯¢ã€‚</p><h3 id="_4-æ•…éšœæ¢å¤" tabindex="-1"><a class="header-anchor" href="#_4-æ•…éšœæ¢å¤"><span>4. æ•…éšœæ¢å¤</span></a></h3><p>é€šè¿‡å‰é¢å°èŠ‚çš„è§£æï¼Œæˆ‘ä»¬çŸ¥é“å­˜å‚¨ source offsets çš„ offsetLogï¼Œå’Œå­˜å‚¨è®¡ç®—çŠ¶æ€çš„ StateStoreï¼Œæ˜¯å…¨å±€é«˜å¯ç”¨çš„ã€‚ä»ç„¶é‡‡ç”¨å‰é¢çš„ç¤ºæ„å›¾ï¼ŒoffsetLog å’Œ StateStore è¢«ç‰¹æ®Šæ ‡è¯†ä¸ºç´«è‰²ï¼Œä»£è¡¨é«˜å¯ç”¨ã€‚</p><p><img src="'+n+`" alt="Spark 1.0"></p><p>ç”±äº exectutor èŠ‚ç‚¹çš„æ•…éšœå¯ç”± Spark æ¡†æ¶æœ¬èº«å¾ˆå¥½çš„ handleï¼Œä¸å¼•èµ·å¯ç”¨æ€§é—®é¢˜ï¼Œæˆ‘ä»¬æœ¬èŠ‚çš„æ•…éšœæ¢å¤åªè®¨è®º driver æ•…éšœæ¢å¤ã€‚</p><p>å¦‚æœåœ¨æŸä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿ driver æ•…éšœï¼Œé‚£ä¹ˆé‡æ–°èµ·æ¥çš„ StreamExecutionï¼š</p><ul><li>è¯»å– WAL offsetlog æ¢å¤å‡ºæœ€æ–°çš„ offsets ç­‰ï¼›ç›¸å½“äºå–ä»£æ­£å¸¸æµç¨‹é‡Œçš„ (1)(2) æ­¥</li><li>è¯»å– batchCommitLog å†³å®šæ˜¯å¦éœ€è¦é‡åšæœ€è¿‘ä¸€ä¸ªæ‰¹æ¬¡</li><li>å¦‚æœéœ€è¦ï¼Œé‚£ä¹ˆé‡åš (3a), (3b), (4), (5), (6a), (6b) æ­¥ <ul><li>è¿™é‡Œç¬¬ (5) æ­¥éœ€è¦åˆ†ä¸¤ç§æƒ…å†µè®¨è®º <ul><li>(i) å¦‚æœä¸Šæ¬¡æ‰§è¡Œåœ¨ (5) <em><strong>ç»“æŸå‰å³å¤±æ•ˆ</strong></em>ï¼Œé‚£ä¹ˆæœ¬æ¬¡æ‰§è¡Œé‡Œ sink åº”è¯¥å®Œæ•´å†™å‡ºè®¡ç®—ç»“æœ</li><li>(ii) å¦‚æœä¸Šæ¬¡æ‰§è¡Œåœ¨ (5) <em><strong>ç»“æŸåæ‰å¤±æ•ˆ</strong></em>ï¼Œé‚£ä¹ˆæœ¬æ¬¡æ‰§è¡Œé‡Œ sink å¯ä»¥é‡æ–°å†™å‡ºè®¡ç®—ç»“æœï¼ˆè¦†ç›–ä¸Šæ¬¡ç»“æœï¼‰ï¼Œä¹Ÿå¯ä»¥è·³è¿‡å†™å‡ºè®¡ç®—ç»“æœï¼ˆå› ä¸ºä¸Šæ¬¡æ‰§è¡Œå·²ç»å®Œæ•´å†™å‡ºè¿‡è®¡ç®—ç»“æœäº†ï¼‰</li></ul></li></ul></li></ul><p>è¿™æ ·å³å¯ä¿è¯æ¯æ¬¡æ‰§è¡Œçš„è®¡ç®—ç»“æœï¼Œåœ¨ sink è¿™ä¸ªå±‚é¢ï¼Œæ˜¯ <em><strong>ä¸é‡ä¸ä¸¢</strong></em> çš„ â€”â€” å³ä½¿ä¸­é—´å‘ç”Ÿè¿‡ 1 æ¬¡æˆ–ä»¥ä¸Šçš„å¤±æ•ˆå’Œæ¢å¤ã€‚</p><h3 id="_5-sources-ä¸-sinks" tabindex="-1"><a class="header-anchor" href="#_5-sources-ä¸-sinks"><span>5. Sources ä¸ Sinks</span></a></h3><p>å¯ä»¥çœ‹åˆ°ï¼ŒStructured Streaming å±‚é¢çš„ Sourceï¼Œéœ€èƒ½ <em><strong>æ ¹æ® offsets é‡æ”¾æ•°æ®</strong></em> [2]ã€‚æ‰€ä»¥ï¼š</p><table><thead><tr><th style="text-align:center;">Sources</th><th style="text-align:center;">æ˜¯å¦å¯é‡æ”¾</th><th style="text-align:center;">åŸç”Ÿå†…ç½®æ”¯æŒ</th><th style="text-align:center;">æ³¨è§£</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>HDFS-compatible file system</strong></td><td style="text-align:center;">âˆš</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">åŒ…æ‹¬ä½†ä¸é™äº text, json, csv, parquet, orc, ...</td></tr><tr><td style="text-align:center;"><strong>Kafka</strong></td><td style="text-align:center;">âˆš</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">Kafka 0.10.0+</td></tr><tr><td style="text-align:center;"><strong>RateStream</strong></td><td style="text-align:center;">âˆš</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">ä»¥ä¸€å®šé€Ÿç‡äº§ç”Ÿæ•°æ®</td></tr><tr><td style="text-align:center;"><strong>RDBMS</strong></td><td style="text-align:center;">âˆš</td><td style="text-align:center;"><em>(å¾…æ”¯æŒ)</em></td><td style="text-align:center;">é¢„è®¡åç»­å¾ˆå¿«ä¼šæ”¯æŒ</td></tr><tr><td style="text-align:center;"><strong>Socket</strong></td><td style="text-align:center;">Ã—</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">ä¸»è¦ç”¨é€”æ˜¯åœ¨æŠ€æœ¯ä¼šè®®/è®²åº§ä¸Šåš demo</td></tr><tr><td style="text-align:center;"><strong>Receiver-based</strong></td><td style="text-align:center;">Ã—</td><td style="text-align:center;">ä¸ä¼šæ”¯æŒ</td><td style="text-align:center;">å°±è®©è¿™äº›å‰æµªè¢«æ‹åœ¨æ²™æ»©ä¸Šå§</td></tr></tbody></table><p>ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒStructured Streaming å±‚é¢çš„ Sinkï¼Œéœ€èƒ½ <em><strong>å¹‚ç­‰å¼å†™å…¥æ•°æ®</strong></em> [3]ã€‚æ‰€ä»¥ï¼š</p><table><thead><tr><th style="text-align:center;">Sinks</th><th style="text-align:center;">æ˜¯å¦å¹‚ç­‰å†™å…¥</th><th style="text-align:center;">åŸç”Ÿå†…ç½®æ”¯æŒ</th><th style="text-align:center;">æ³¨è§£</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>HDFS-compatible file system</strong></td><td style="text-align:center;">âˆš</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">åŒ…æ‹¬ä½†ä¸é™äº text, json, csv, parquet, orc, ...</td></tr><tr><td style="text-align:center;"><strong>ForeachSink</strong> (è‡ªå®šæ“ä½œå¹‚ç­‰)</td><td style="text-align:center;">âˆš</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">å¯å®šåˆ¶åº¦éå¸¸é«˜çš„ sink</td></tr><tr><td style="text-align:center;"><strong>RDBMS</strong></td><td style="text-align:center;">âˆš</td><td style="text-align:center;"><em>(å¾…æ”¯æŒ)</em></td><td style="text-align:center;">é¢„è®¡åç»­å¾ˆå¿«ä¼šæ”¯æŒ</td></tr><tr><td style="text-align:center;"><strong>Kafka</strong></td><td style="text-align:center;">Ã—</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">Kafka ç›®å‰ä¸æ”¯æŒå¹‚ç­‰å†™å…¥ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæœ‰é‡å¤å†™å…¥<br>ï¼ˆä½†æ¨èæ¥ç€ Kafka ä½¿ç”¨ streaming de-duplication æ¥å»é‡ï¼‰</td></tr><tr><td style="text-align:center;"><strong>ForeachSink</strong> (è‡ªå®šæ“ä½œä¸å¹‚ç­‰)</td><td style="text-align:center;">Ã—</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">ä¸æ¨èä½¿ç”¨ä¸å¹‚ç­‰çš„è‡ªå®šæ“ä½œ</td></tr><tr><td style="text-align:center;"><strong>Console</strong></td><td style="text-align:center;">Ã—</td><td style="text-align:center;">å·²æ”¯æŒ</td><td style="text-align:center;">ä¸»è¦ç”¨é€”æ˜¯åœ¨æŠ€æœ¯ä¼šè®®/è®²åº§ä¸Šåš demo</td></tr></tbody></table><h3 id="_6-å°ç»“-end-to-end-exactly-once-guarantees" tabindex="-1"><a class="header-anchor" href="#_6-å°ç»“-end-to-end-exactly-once-guarantees"><span>6. å°ç»“ï¼šend-to-end exactly-once guarantees</span></a></h3><p>æ‰€ä»¥åœ¨ Structured Streaming é‡Œï¼Œæˆ‘ä»¬æ€»ç»“ä¸‹é¢çš„å…³ç³»[4]ï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">- offset tracking in wal</span>
<span class="line">- state management in state store</span>
<span class="line">- fault-tolerance sources and sinks</span>
<span class="line">= end to end exactly-once guarantees</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„ end-to-end æŒ‡çš„æ˜¯ï¼Œå¦‚æœ source é€‰ç”¨ç±»ä¼¼ Kafka, HDFS ç­‰ï¼Œsink é€‰ç”¨ç±»ä¼¼ HDFS, MySQL ç­‰ï¼Œé‚£ä¹ˆ Structured Streaming å°†è‡ªåŠ¨ä¿è¯åœ¨ sink é‡Œçš„è®¡ç®—ç»“æœæ˜¯ exactly-once çš„ â€”â€” Structured Streaming ç»ˆäºæŠŠè¿‡å»éœ€è¦ä½¿ç”¨è€…å»ç»´æŠ¤çš„ sink å»é‡é€»è¾‘æ¥ç›˜è¿‡å»äº†ï¼ğŸ˜ƒ</p><h2 id="äº”ã€å…¨æ–‡æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#äº”ã€å…¨æ–‡æ€»ç»“"><span>äº”ã€å…¨æ–‡æ€»ç»“</span></a></h2><p>è‡ª Spark 2.0 å¼€å§‹ï¼Œå¤„ç† structured data çš„ Dateset/DataFrame è¢«æ‰©å±•ä¸ºåŒæ—¶å¤„ç† streaming dataï¼Œè¯ç”Ÿäº† Structured Streamingã€‚</p><p>Structured Streaming ä»¥â€œæ— é™æ‰©å±•çš„è¡¨æ ¼â€ä¸ºç¼–ç¨‹æ¨¡å‹ï¼Œåœ¨ StreamExecution å®é™…æ‰§è¡Œä¸­å¢é‡æ‰§è¡Œï¼Œå¹¶æ»¡è¶³ end-to-end exactly-once guarantee.</p><p>åœ¨ Spark 2.0 æ—¶ä»£ï¼ŒDataset/DataFrame æˆä¸ºä¸»è¦çš„ç”¨æˆ· APIï¼ŒåŒæ—¶æ»¡è¶³ structured data, streaming data, machine learning, graph ç­‰åº”ç”¨åœºæ™¯ï¼Œå¤§å¤§å‡å°‘ä½¿ç”¨è€…éœ€è¦å­¦ä¹ çš„å†…å®¹ï¼Œçˆ½çˆ½åœ°åˆé‡æ–°å®ç°äº†ä¸€æŠŠå½“å¹´çš„ &quot;one stack to rule them all&quot; çš„ç†æƒ³ã€‚</p><blockquote><p>è°¨ä»¥æ­¤ã€ŠStructured Streaming æºç è§£æç³»åˆ—ã€‹å’Œä»¥å¾€çš„ã€ŠSpark Streaming æºç è§£æç³»åˆ—ã€‹ï¼Œå‘â€œæŠŠå¤§æ•°æ®å˜å¾—æ›´ç®€å• (make big data simple) â€çš„åˆ›æ–°è€…ä»¬ï¼Œè¡¨è¾¾æ„Ÿè°¢å’Œæ•¬æ„ã€‚</p></blockquote><h2 id="å…­ã€æ‰©å±•é˜…è¯»" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ‰©å±•é˜…è¯»"><span>å…­ã€æ‰©å±•é˜…è¯»</span></a></h2><ol><li>Spark Summit East 2016: <a href="https://spark-summit.org/east-2016/events/keynote-day-3/" target="_blank" rel="noopener noreferrer">The Future of Real-time in Spark</a></li><li>Blog: <a href="https://databricks.com/blog/2016/07/28/continuous-applications-evolving-streaming-in-apache-spark-2-0.html" target="_blank" rel="noopener noreferrer">Continuous Applications: Evolving Streaming in Apache Spark 2.0</a></li><li>Blog: <a href="https://databricks.com/blog/2016/07/28/structured-streaming-in-apache-spark.html" target="_blank" rel="noopener noreferrer">Structured Streaming In Apache Spark: A new high-level API for streaming</a></li></ol><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™"><span>å‚è€ƒèµ„æ–™</span></a></h2><ol><li><a href="http://spark.apache.org/docs/latest/structured-streaming-programming-guide.html" target="_blank" rel="noopener noreferrer">Structured Streaming Programming Guide</a></li><li><a href="https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/execution/streaming/Source.scala" target="_blank" rel="noopener noreferrer">Github: org/apache/spark/sql/execution/streaming/Source.scala</a></li><li><a href="https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/execution/streaming/Sink.scala" target="_blank" rel="noopener noreferrer">Github: org/apache/spark/sql/execution/streaming/Sink.scala</a></li><li><a href="http://www.slideshare.net/databricks/a-deep-dive-into-structured-streaming?qid=51953136-8233-4d5d-a1c2-ce30051f16d1&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">A Deep Dive into Structured Streaming</a></li></ol><h2 id="çŸ¥è¯†å…±äº«" tabindex="-1"><a class="header-anchor" href="#çŸ¥è¯†å…±äº«"><span>çŸ¥è¯†å…±äº«</span></a></h2><p><img src="https://licensebuttons.net/l/by-nc/4.0/88x31.png" alt=""></p><p>é™¤éå¦æœ‰æ³¨æ˜ï¼Œæœ¬ã€ŠStructured Streaming æºç è§£æç³»åˆ—ã€‹ç³»åˆ—æ–‡ç« ä½¿ç”¨ <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener noreferrer">CC BY-NCï¼ˆç½²å-éå•†ä¸šæ€§ä½¿ç”¨ï¼‰</a> çŸ¥è¯†å…±äº«è®¸å¯åè®®ã€‚<br><br></p><blockquote><p>https://github.com/lw-lin/CoolplaySpark</p></blockquote>`,75)]))}const v=s(h,[["render",k]]),D=JSON.parse('{"path":"/guide/etl/spark/Structured-Streaming-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF%E4%B8%8E%E5%AE%9E%E7%8E%B0%E6%A6%82%E8%BF%B0%20.html","title":"Structured Streaming å®ç°æ€è·¯ä¸å®ç°æ¦‚è¿°","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"ä¸€ã€å¼•è¨€ï¼šSpark 2 æ—¶ä»£!","slug":"ä¸€ã€å¼•è¨€-spark-2-æ—¶ä»£","link":"#ä¸€ã€å¼•è¨€-spark-2-æ—¶ä»£","children":[]},{"level":2,"title":"äºŒã€ä» Structured Data åˆ° Structured Streaming","slug":"äºŒã€ä»-structured-data-åˆ°-structured-streaming","link":"#äºŒã€ä»-structured-data-åˆ°-structured-streaming","children":[]},{"level":2,"title":"ä¸‰ã€Structured Streamingï¼šæ— é™å¢é•¿çš„è¡¨æ ¼","slug":"ä¸‰ã€structured-streaming-æ— é™å¢é•¿çš„è¡¨æ ¼","link":"#ä¸‰ã€structured-streaming-æ— é™å¢é•¿çš„è¡¨æ ¼","children":[]},{"level":2,"title":"å››ã€StreamExecutionï¼šæŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“","slug":"å››ã€streamexecution-æŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“","link":"#å››ã€streamexecution-æŒç»­æŸ¥è¯¢çš„è¿è½¬å¼•æ“","children":[{"level":3,"title":"1. StreamExecution çš„åˆå§‹çŠ¶æ€","slug":"_1-streamexecution-çš„åˆå§‹çŠ¶æ€","link":"#_1-streamexecution-çš„åˆå§‹çŠ¶æ€","children":[]},{"level":3,"title":"2. StreamExecution çš„æŒç»­æŸ¥è¯¢","slug":"_2-streamexecution-çš„æŒç»­æŸ¥è¯¢","link":"#_2-streamexecution-çš„æŒç»­æŸ¥è¯¢","children":[]},{"level":3,"title":"3. StreamExecution çš„æŒç»­æŸ¥è¯¢ï¼ˆå¢é‡ï¼‰","slug":"_3-streamexecution-çš„æŒç»­æŸ¥è¯¢-å¢é‡","link":"#_3-streamexecution-çš„æŒç»­æŸ¥è¯¢-å¢é‡","children":[]},{"level":3,"title":"4. æ•…éšœæ¢å¤","slug":"_4-æ•…éšœæ¢å¤","link":"#_4-æ•…éšœæ¢å¤","children":[]},{"level":3,"title":"5. Sources ä¸ Sinks","slug":"_5-sources-ä¸-sinks","link":"#_5-sources-ä¸-sinks","children":[]},{"level":3,"title":"6. å°ç»“ï¼šend-to-end exactly-once guarantees","slug":"_6-å°ç»“-end-to-end-exactly-once-guarantees","link":"#_6-å°ç»“-end-to-end-exactly-once-guarantees","children":[]}]},{"level":2,"title":"äº”ã€å…¨æ–‡æ€»ç»“","slug":"äº”ã€å…¨æ–‡æ€»ç»“","link":"#äº”ã€å…¨æ–‡æ€»ç»“","children":[]},{"level":2,"title":"å…­ã€æ‰©å±•é˜…è¯»","slug":"å…­ã€æ‰©å±•é˜…è¯»","link":"#å…­ã€æ‰©å±•é˜…è¯»","children":[]},{"level":2,"title":"å‚è€ƒèµ„æ–™","slug":"å‚è€ƒèµ„æ–™","link":"#å‚è€ƒèµ„æ–™","children":[]},{"level":2,"title":"çŸ¥è¯†å…±äº«","slug":"çŸ¥è¯†å…±äº«","link":"#çŸ¥è¯†å…±äº«","children":[]}],"git":{"updatedTime":1753237474000,"contributors":[{"name":"alice","username":"alice","email":"921757697@qq.com","commits":2,"url":"https://github.com/alice"}],"changelog":[{"hash":"245816fee7920b84913505a4353b6b4f934da7c0","time":1753237474000,"email":"921757697@qq.com","author":"alice","message":"uniapp ç»„ä»¶"},{"hash":"7706e85b299e47a4a064f79e4ce4f11f0e5f015c","time":1745114781000,"email":"921757697@qq.com","author":"alice","message":"doc æ•´ç†"}]},"filePathRelative":"guide/etl/spark/Structured-Streaming-å®ç°æ€è·¯ä¸å®ç°æ¦‚è¿° .md"}');export{v as comp,D as data};
