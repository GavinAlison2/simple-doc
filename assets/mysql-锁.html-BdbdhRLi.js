import{_ as i,c as e,e as a,o as s}from"./app-DzmgiGLk.js";const c={};function t(n,l){return s(),e("div",null,l[0]||(l[0]=[a('<h1 id="锁" tabindex="-1"><a class="header-anchor" href="#锁"><span>锁</span></a></h1><h2 id="锁的种类" tabindex="-1"><a class="header-anchor" href="#锁的种类"><span>锁的种类</span></a></h2><ul><li><p>共享锁（S锁）：允许多个事务同时读取同一行数据，但不允许更新。</p></li><li><p>排他锁（X锁）：允许独占访问和修改数据，其他事务必须等待锁释放后才能访问。</p></li><li><p>行级锁：是InnoDB存储引擎特有的锁机制，允许对单个行进行加锁，实现更细粒度的并发控制。</p></li><li><p>表级锁：是MyISAM存储引擎特有的锁机制，对整个表加锁，实现更高的并发控制。</p></li><li><p>表级锁：锁定整张表，对整个表进行加锁，并发效率不高。</p><ul><li>IX： 意向排他锁</li><li>IS： 意向共享锁</li><li>S： 共享锁</li><li>X： 排他锁</li></ul></li><li><p>行级锁：锁定一行数据，对单个行进行加锁，并发效率高。</p><ul><li>S： 共享锁</li><li>X： 排他锁</li><li>Record Lock： 记录锁，锁定一行记录，对记录加锁，其他事务不能修改该记录。</li><li>Gap Lock： 间隙锁，锁定范围内的记录，对记录加锁，其他事务不能插入该范围内的记录。</li><li>Next-Key Lock： 前开后闭锁，锁定范围内的记录，对记录加锁，其他事务不能插入该范围内的记录，也不能在范围内插入记录。</li></ul></li><li><p>页级锁：锁定一页数据，对一页中的多个行进行加锁，并发效率高。</p></li></ul><h2 id="锁的粒度" tabindex="-1"><a class="header-anchor" href="#锁的粒度"><span>锁的粒度</span></a></h2><ul><li>表级锁：锁定整张表，对整个表进行加锁，并发效率不高。</li><li>行级锁：锁定一行数据，对单个行进行加锁，并发效率高。</li><li>页级锁：锁定一页数据，对一页中的多个行进行加锁，并发效率高。</li></ul><h2 id="死锁" tabindex="-1"><a class="header-anchor" href="#死锁"><span>死锁</span></a></h2><p>死锁是指两个或两个以上的事务在同一资源上相互占用，并请求对方释放资源，导致恶性循环，使得数据库资源一直处于锁定状态。</p><p>解决死锁的方法：</p><ul><li>超时回退：当两个事务在同一资源上相互等待超过一定的时间，则认为发生了死锁，并自动回退，释放资源。</li><li>死锁检测和回滚：当检测到死锁发生时，立即回滚其中一个事务，释放资源，并通知其他事务。</li><li>资源预留：为每个事务分配一定的资源，使得资源总分配量小于系统总资源。</li><li>主从备份：当发生死锁时，主服务器挂起，等待超时或主服务器死锁解除后，从服务器接管工作。</li><li>串行化调度：通过将事务调度到串行顺序执行，避免死锁。</li><li>并发度控制：通过限制并发事务数，避免死锁。</li><li>隔离级别：通过隔离级别来控制事务的并发性，避免死锁。</li><li>回滚并重新执行：当发生死锁时，回滚事务，并重新执行。</li><li>其他方法：如，将事务分解为多个小事务，避免死锁。</li><li>避免死锁：在设计数据库表结构时，尽量避免使用不必要的外键，避免长事务，避免大事务。</li></ul>',9)]))}const d=i(c,[["render",t]]),o=JSON.parse('{"path":"/guide/mysql/mysql-%E9%94%81.html","title":"锁","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"锁的种类","slug":"锁的种类","link":"#锁的种类","children":[]},{"level":2,"title":"锁的粒度","slug":"锁的粒度","link":"#锁的粒度","children":[]},{"level":2,"title":"死锁","slug":"死锁","link":"#死锁","children":[]}],"git":{"updatedTime":1746778681000,"contributors":[{"name":"alice","username":"alice","email":"921757697@qq.com","commits":3,"url":"https://github.com/alice"}],"changelog":[{"hash":"9a9a724e2266d508b01cf98d17493fda41251e3d","time":1746778681000,"email":"921757697@qq.com","author":"alice","message":"deploy mysql 手绘图"},{"hash":"08a00ac7220dc776bf84c5c8840641d4795d542e","time":1746448991000,"email":"921757697@qq.com","author":"alice","message":"deploy mysql 45讲"},{"hash":"daf3790ef1795d02fbff734cf83b3c856cbb378c","time":1746034246000,"email":"921757697@qq.com","author":"alice","message":"deploy mysql"}]},"filePathRelative":"guide/mysql/mysql-锁.md"}');export{d as comp,o as data};
