# CMS GC的工作原理和致命缺陷

## 1. CMS GC的工作原理

CMS（Concurrent Mark Sweep）GC是一种以并发的方式进行垃圾回收的垃圾回收器。它主要有以下几个特点：

1. 并发：CMS GC采用了多线程并发的方式进行垃圾回收，多个线程同时运行，有效利用多核CPU的优势。
2. 并行：CMS GC采用了并行的方式进行垃圾回收，多个垃圾回收线程同时扫描各个Region，有效减少垃圾回收的停顿时间。
3. 标记-清除：CMS GC采用的是“标记-清除”算法，首先标记出所有需要回收的对象，然后统一回收掉标记的对象，这种方式会产生内存碎片。
4. 低延迟：CMS GC的垃圾回收过程发生在应用程序线程之外，因此，它对应用程序的响应时间影响较小。

CMS 处理数= (CPU数量+3)/4
CMS 处理器占比 = 1/4 + 3/(4*CPU数量) >=25%

CMS至少占用 CPU的25%的核数


